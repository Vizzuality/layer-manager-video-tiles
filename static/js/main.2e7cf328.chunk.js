(window["webpackJsonplayer-manager-video-tiles"]=window["webpackJsonplayer-manager-video-tiles"]||[]).push([[0],{123:function(e,t){},208:function(e,t,n){e.exports=n(349)},304:function(e,t,n){},321:function(e,t){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var o=n(9),r=n.n(o),a=n(116),i=n.n(a),c=n(0),s=n(5),d=n(161),l=n.n(d),u=n(36),p=n.n(u);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e,t){var n=new Date(t),o=new Date(e),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),a=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());return Math.floor((a-r)/864e5)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.startDate,o=t.endDate,r=t.minDate,a=t.maxDate;if(!n||!o||!r||!a)return null;var i=new Date(r),c=new Date(a),s=f(c,i),d=new Date(n),l=new Date(o),u=s-f(c,d),p=s-f(c,l),m=u||0,g=p||s;return{startDayIndex:m,endDayIndex:g,numberOfDays:s}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reduce(function(e,t){var n=t.key,o=t.default;return g({},e,Object(c.a)({},n,o))},{}),o=g({},n,{},t),r=o.startDate,a=o.endDate,i=o.trimEndDate,s=o.maxAbsoluteDate,d=r,l=a>s?s:a,u=i>s?s:i;return g({},o,{},!!d&&{startYear:p()(d).year(),startMonth:p()(d).month(),startDay:p()(d).dayOfYear()},{},!!a&&{endYear:p()(l).year(),endMonth:p()(l).month(),endDay:p()(l).dayOfYear()},{},!!i&&{trimEndYear:p()(u).year(),trimEndMonth:p()(u).month(),trimEndDay:p()(u).dayOfYear()},{},b(o))},v=n(166),y=n(2),O=n(1),w=n(7),j=n(4),C=n(8),D=n(162),P=n.n(D),E=n(58),S=n.n(E),k=n(39),I=n.n(k),x=n(98),T=n(354),A=n(165);n(303),n(304);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M={zoom:2,lat:0,lng:0},R=function(e){function t(){var e,n;Object(y.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(w.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).events={},n.state={viewport:F({},M,{},n.props.viewport),flying:!1,loaded:!1},n.onLoad=function(){var e=n.props,t=e.bounds,o=e.onLoad;n.setState({loaded:!0}),!I()(t)&&t.bbox&&n.fitBounds(),o({map:n.map,mapContainer:n.mapContainer})},n.onViewportChange=function(e,t){var o=n.props.onViewportChange;n.setState({viewport:e}),o(e)},n.onResize=function(e){var t=n.props.onViewportChange,o=F({},n.state.viewport,{},e);n.setState({viewport:o}),t(o)},n.onMoveEnd=function(){var e=n.props.onViewportChange,t=n.state.viewport;if(n.map){var o=n.map.getBearing(),r=n.map.getPitch(),a=n.map.getZoom(),i=n.map.getCenter(),c=i.lng,s=F({},t,{bearing:o,pitch:r,zoom:a,latitude:i.lat,longitude:c});n.setState({viewport:s}),e(s)}},n.fitBounds=function(){var e=n.state.viewport,t=n.props,o=t.bounds,r=t.onViewportChange,a=o.bbox,i=o.options,c=F({width:n.mapContainer.offsetWidth,height:n.mapContainer.offsetHeight},e),s=new T.a(c).fitBounds([[a[0],a[1]],[a[2],a[3]]],i),d=s.longitude,l=s.latitude,u=s.zoom,p=F({},n.state.viewport,{longitude:d,latitude:l,zoom:u,transitionDuration:2500,transitionInterruption:x.b.UPDATE});n.setState({flying:!0,viewport:p}),r(p),setTimeout(function(){n.setState({flying:!1})},2500)},n}return Object(C.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.viewport,n=e.bounds,o=this.props,r=o.viewport,a=o.bounds,i=this.state.viewport;S()(r,t)||this.setState({viewport:F({},i,{},r)}),I()(a)||S()(a,n)||this.fitBounds()}},{key:"render",value:function(){var e=this,t=this.props,n=t.customClass,o=t.children,a=(t.getCursor,t.dragPan),i=t.dragRotate,s=t.scrollZoom,d=t.touchZoom,l=t.touchRotate,u=t.doubleClickZoom,p=Object(v.a)(t,["customClass","children","getCursor","dragPan","dragRotate","scrollZoom","touchZoom","touchRotate","doubleClickZoom"]),m=this.state,g=m.viewport,f=m.loaded,b=m.flying;return r.a.createElement("div",{ref:function(t){e.mapContainer=t},className:P()(Object(c.a)({"c-map":!0},n,!!n))},r.a.createElement(x.c,Object.assign({ref:function(t){e.map=t&&t.getMap()}},p,g,{width:"100%",height:"100%",dragPan:!b&&a,dragRotate:!b&&i,scrollZoom:!b&&s,touchZoom:!b&&d,touchRotate:!b&&l,doubleClickZoom:!b&&u,onViewportChange:this.onViewportChange,onResize:this.onResize,onLoad:this.onLoad,transitionInterpolator:new x.a,transitionEasing:A.a}),f&&!!this.map&&"function"===typeof o&&o(this.map)))}}]),t}(o.Component);R.defaultProps={children:null,customClass:null,viewport:M,bounds:{},dragPan:!0,dragRotate:!0,onViewportChange:function(){},onLoad:function(){},getCursor:function(e){var t=e.isHovering,n=e.isDragging;return t?"pointer":n?"grabbing":"grab"}};var Z=R,z=n(118),V=n(124),Y=n(45),q=[{id:"testing-video",name:"Testing video",config:{type:"video",source:{type:"video"}},legendConfig:{type:"video",items:[{name:"Testing video",color:"#6D6DE5"}]},onAfterAdd:function(e,t){var n=t.getSource(e.id).player,o=n.currentTime;!function e(){var t=n.duration;o=o>=t?0:o+.05,n.setCurrentTime(o>t?t:o),requestAnimationFrame(e)}(),n.onTimeChanged=function(e){},console.log(n)}}];n(347);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(){var e=Object(o.useState)(q),t=Object(s.a)(e,1)[0],n=Object(o.useState)({}),a=Object(s.a)(n,2),i=a[0],d=a[1],u=t.map(function(e){var t=e.id,n=e.paramsConfig,o=e.sqlConfig,r=e.decodeConfig,a=e.timelineConfig,c=i[t]||{},s=!!n&&h(n,c.params),d=!!o&&h(o,c.sqlParams),l=!!r&&h(r,J({},a,{},c.decodeParams)),u=!!a&&J({},a,{},h(n,c.params),{},h(r,c.decodeParams));return J({id:t,slug:t,dataset:t,layers:[J({active:!0},e,{},c,{params:s,sqlParams:d,decodeParams:l,timelineParams:u})]},c)}),p=function(e,t){d(J({},i,Object(c.a)({},e.id,J({},i[e.id],{visibility:t}))))},m=function(e,t){d(J({},i,Object(c.a)({},e.id,J({},i[e.id],{opacity:t}))))},g=function(e,t){var n=t.id,o=t.decodeConfig;d(J({},i,Object(c.a)({},n,J({},i[n],{},o&&{decodeParams:{startDate:e[0],endDate:e[1],trimEndDate:e[2]}},{},!o&&{params:{startDate:e[0],endDate:e[1]}}))))};return r.a.createElement("div",{className:"c-app"},r.a.createElement(Y.Icons,null),r.a.createElement("div",{className:"c-main"},r.a.createElement("div",{className:"c-map-container"},r.a.createElement(Z,{mapboxApiAccessToken:"pk.eyJ1IjoibGF5ZXItbWFuYWdlciIsImEiOiJjazA2dTJnMG0zc3lwM251dGM0aXhiYTVxIn0.AaoErQTRezfQshqnEKIg8A",minZoom:2,mapOptions:{fadeDuration:0}},function(e){return r.a.createElement(z.LayerManager,{map:e,plugin:V.a,providers:{"carto-sql-points":function(e,t,n,o){var r=e.source.provider;Object(V.b)("get",r.url,r.options,e).then(function(e){return n(J({},t,{source:J({},l()(t.source,"provider"),{data:{type:"FeatureCollection",features:e.rows.map(function(e){return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[e.lon,e.lat]}}})}})}))}).catch(function(e){o(e)})}}},t.map(function(e){var t=e.id,n=e.paramsConfig,o=e.sqlConfig,a=e.decodeConfig,c=e.timelineConfig,s=e.decodeFunction,d=i[t]||{},l=J({},e,{},e.config,{},d,{},!!n&&{params:h(n,J({},d.params))},{},!!o&&{sqlParams:h(o,J({},d.sqlParams))},{},!!a&&{decodeParams:h(a,J({},c,{},d.decodeParams)),decodeFunction:s},{onAfterAdd:e.onAfterAdd});return r.a.createElement(z.Layer,Object.assign({key:e.id},l))}))}),r.a.createElement("div",{className:"c-legend"},r.a.createElement(Y.Legend,{maxHeight:"65vh",collapsable:!1,sortable:!1,onChangeOrder:function(e){console.log("onChangeOrder",e)}},u.map(function(e,t){return r.a.createElement(Y.LegendListItem,{index:t,key:e.slug,layerGroup:e,toolbar:r.a.createElement(Y.LegendItemToolbar,null,r.a.createElement(Y.LegendItemButtonOpacity,{trackStyle:{background:"#FFCC00"},handleStyle:{background:"#FFCC00"}}),r.a.createElement(Y.LegendItemButtonVisibility,null)),onChangeVisibility:p,onChangeOpacity:m},r.a.createElement(Y.LegendItemTypes,null),r.a.createElement(Y.LegendItemTimeStep,{defaultStyles:{handleStyle:{backgroundColor:"white",borderRadius:"50%",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.29)",border:"0px",zIndex:2},railStyle:{backgroundColor:"#d6d6d9"},dotStyle:{visibility:"hidden",border:"0px"}},handleChange:g}))}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(348);i.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[208,1,2]]]);
//# sourceMappingURL=main.2e7cf328.chunk.js.map